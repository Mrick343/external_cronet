<?xml version="1.0" encoding="utf-8"?>
<!--
Copyright 2014 The Chromium Authors
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:tools="http://schemas.android.com/tools"
          package="org.chromium.net.tests"
          android:versionCode="1"
          android:versionName="1.0"
          tools:ignore="ScopedStorage">
  <!-- tools:ignore="ScopedStorage" stops the linter from yelling at us for
       bypassing Scoped Storage. -->
  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
  <uses-permission android:name="android.permission.INTERNET" />
  <uses-permission android:name="android.permission.RUN_INSTRUMENTATION" />
  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

  <!-- Starting from Android 11 not all packages are visible by default and this stops us
       from starting an EmbeddedTestServer. Request visibility by using an intent
       filter signature
       (https://developer.android.com/training/package-visibility/declaring#intent-filter-signature)
  -->
  <queries>
    <intent>
      <action android:name="org.chromium.net.test.EMBEDDED_TEST_SERVER_SERVICE" />
    </intent>
  </queries>

  <application android:label="Cronet Test"
               android:networkSecurityConfig="@xml/network_security_config"/>
  <!-- Does not use BaseChromiumAndroidJUnitRunner so that it's easy to run
       tests when dropped into non-chromium repositories. -->
  <instrumentation android:name="android.support.test.runner.AndroidJUnitRunner"
                   android:targetPackage="org.chromium.net.tests"
                   android:label="Tests for org.chromium.net" />
</manifest>
